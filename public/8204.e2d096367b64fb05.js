"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8204],{8204:(E,f,s)=>{s.r(f),s.d(f,{Tab2PageModule:()=>M});var i=s(1929),y=s(6814),p=s(95),R=s(3554),P=s(7217),b=s(9027),T=s(830),v=s(4934),g=s(5861),e=s(9212),w=s(5330);const A=[{path:"",component:(()=>{var o;class c{constructor(a,t,n,r){this.actionSheetController=a,this.photoService=t,this.firestore=n,this.storage=r,this.newRestaurant={name:"",description:"",image:""}}uploadImage(a,t){var n=this;return(0,g.Z)(function*(){if(!a)throw new Error("Base64 Data no definido");const l=n.storage.ref(`restaurants/${t}`),m=(n.base64toBlob(a),l.putString(a,"base64",{contentType:"image/png"}));return new Promise((S,B)=>{m.then(h=>{h.ref.getDownloadURL().then(J=>{S(J)})}).catch(h=>{console.error("Error al subir la imagen:",h),B(h)})})})()}base64toBlob(a){try{const t=atob(a),n=new Array(t.length);for(let l=0;l<t.length;l++)n[l]=t.charCodeAt(l);const r=new Uint8Array(n);return new Blob([r],{type:"image/png"})}catch(t){return console.error("Error al convertir Base64 a Blob:",t),null}}convertBlobFormat(a,t){return(0,g.Z)(function*(){return new Promise(n=>{const r=new Image;r.onload=()=>{const l=document.createElement("canvas");l.width=r.width,l.height=r.height;const d=l.getContext("2d");null==d||d.drawImage(r,0,0,r.width,r.height),l.toBlob(m=>{n(m||null)},t)},r.onerror=l=>{console.error("Error al cargar la imagen:",l),n(null)},r.src="data:image/jpeg;base64,"+a})})()}addPhotoToGallery(){var a=this;return(0,g.Z)(function*(){try{if(yield a.photoService.isCameraAvailable()){const n=yield a.photoService.selectImageSource();if(null!==n){const r=yield a.photoService.takePhoto(n);r&&r.base64String?a.newRestaurant.image=r.base64String:console.error("Error al capturar la foto desde la c\xe1mara.")}}else{const n=yield a.photoService.selectImage();n&&n.base64String?a.newRestaurant.image=n.base64String:console.error("Error al seleccionar la foto desde la galer\xeda.")}}catch(t){console.error("Error al capturar la foto:",t)}})()}addRestaurant(){var a=this;return(0,g.Z)(function*(){try{if(!a.newRestaurant.image)return void console.error("La propiedad image en newRestaurant no est\xe1 definida.");const t=yield a.uploadImage(a.newRestaurant.image,a.newRestaurant.name);t?(a.newRestaurant.image=t,yield a.firestore.collection("restaurants").add(a.newRestaurant),a.newRestaurant={name:"",description:"",image:""},console.log("Restaurante agregado a Firebase")):console.error("No se pudo obtener la URL de descarga de la imagen.")}catch(t){console.error("Error al agregar el restaurante:",t)}})()}}return(o=c).\u0275fac=function(a){return new(a||o)(e.Y36(i.BX),e.Y36(w.T),e.Y36(b.ST),e.Y36(T.Q1))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tab2"]],decls:17,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["position","stacked"],["placeholder","Nombre del restaurante",3,"ngModel","ngModelChange"],["placeholder","Descripci\xf3n del restaurante",3,"ngModel","ngModelChange"],[3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3," Registrar Restaurante "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-item")(6,"ion-label",2),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"ion-input",3),e.NdJ("ngModelChange",function(r){return t.newRestaurant.name=r}),e.qZA()(),e.TgZ(9,"ion-item")(10,"ion-label",2),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"ion-textarea",4),e.NdJ("ngModelChange",function(r){return t.newRestaurant.description=r}),e.qZA()(),e.TgZ(13,"ion-button",5),e.NdJ("click",function(){return t.addPhotoToGallery()}),e._uU(14,"Tomar Foto"),e.qZA(),e.TgZ(15,"ion-button",5),e.NdJ("click",function(){return t.addRestaurant()}),e._uU(16,"Agregar Restaurante"),e.qZA()()),2&a&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("ngModel",t.newRestaurant.name),e.xp6(4),e.Q6J("ngModel",t.newRestaurant.description))},dependencies:[i.YG,i.W2,i.Gu,i.pK,i.Ie,i.Q$,i.g2,i.wd,i.sr,i.j9,p.JJ,p.On]}),c})(),data:{noCache:!0}}];let Z=(()=>{var o;class c{}return(o=c).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[v.Bz.forChild(A),v.Bz]}),c})();var C=s(553);let M=(()=>{var o;class c{}return(o=c).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[i.Pc,y.ez,p.u5,R.e,Z,P.hO.initializeApp(C.N.firebase),b.yb,T.TE]}),c})()}}]);